
plugins {
    id 'org.jetbrains.intellij' version '1.14.1'
    id "org.jetbrains.kotlin.jvm" version "1.8.10"
    id 'maven-publish'
}
group 'com.finanteq.plugins.idea'
version '222.4459.2'

sourceCompatibility = 17

repositories {
    mavenCentral()
}

dependencies {
    testImplementation group: 'junit', name: 'junit', version: '4.13.2'
}

compileKotlin {
    kotlinOptions.jvmTarget = sourceCompatibility
}
compileTestKotlin {
    kotlinOptions.jvmTarget = sourceCompatibility
}
def studioVersion = "222.4459.24.2221.10121639"
intellij {
    version.set(studioVersion)
    type.set("AI")
    plugins.set(['cucumber-java:222.4459.16', 'gherkin:222.4459.16', 'Kotlin', 'java', "org.jetbrains.android"])
    updateSinceUntilBuild.set(false)
    sameSinceUntilBuild.set(false)
}

signPlugin {
    certificateChainFile.set(file(findProperty("finanteqOpenSourceCertFile")))
    privateKeyFile.set(file(findProperty("finanteqOpenSourceKeyFile")))
    password.set(findProperty("finanteqOpenSourceKeyPassword"))
}

publishPlugin {
    token.set(findProperty("finanteqOpenSourceJetbrainsPublishToken"))
}

tasks {
    buildSearchableOptions {
        enabled = false
    }
}